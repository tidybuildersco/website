<!-- =========================
QUOTE FLOW (multi-step, emails summary)
Add this WHOLE block inside your existing <body> (anywhere),
then change your "Get a Quote" button href to: href="#quote"
========================= -->

<!-- 1) Change your button to open the quote flow -->
<!-- Replace: <a class="cta" href="tel:+18182774433">Get a Quote</a>
     With:    <a class="cta" href="#quote">Get a Quote</a>
-->

<style>
  /* Quote flow */
  #quote { scroll-margin-top: 140px; }
  .qwrap{max-width:1000px;margin:0 auto;padding:70px 24px}
  .qcard{background:var(--white);border:1px solid var(--border);border-radius:22px;box-shadow:0 30px 60px rgba(0,0,0,.10);overflow:hidden}
  .qhead{padding:26px 26px 10px;border-bottom:1px solid var(--border)}
  .qhead h2{margin:0;font-size:28px}
  .qhead p{margin:8px 0 0;color:var(--muted)}
  .qbody{padding:26px}
  .qsteps{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .qdot{height:10px;width:10px;border-radius:999px;background:var(--border)}
  .qdot.on{background:var(--accent)}
  .qgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:18px}
  @media(max-width:900px){.qgrid{grid-template-columns:1fr}}
  .qopt{
    display:flex;align-items:center;gap:14px;
    border:1px solid var(--border);border-radius:16px;
    padding:14px 14px;background:var(--bg);
    cursor:pointer;transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
  }
  .qopt:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(0,0,0,.08);border-color:#cbd5e1}
  .qicon{
    height:44px;width:44px;border-radius:14px;
    background:var(--accent-soft);display:grid;place-items:center;
    border:1px solid #dbe7ff;
    flex:0 0 auto;
  }
  .qicon svg{height:22px;width:22px;stroke:var(--accent)}
  .qopt h3{margin:0;font-size:16px}
  .qopt p{margin:2px 0 0;color:var(--muted);font-size:13px}

  .qrow{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:16px}
  @media(max-width:900px){.qrow{grid-template-columns:1fr}}
  .qfield label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  .qfield input,.qfield textarea{
    width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--border);
    font-family:inherit;font-size:15px;background:#fff;outline:none;
  }
  .qfield textarea{min-height:120px;resize:vertical}
  .qactions{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-top:18px}
  .qbtn{
    padding:12px 16px;border-radius:12px;border:1px solid var(--border);
    background:#fff;font-weight:600;cursor:pointer;
  }
  .qbtn.primary{background:var(--accent);color:#fff;border-color:transparent}
  .qbtn:disabled{opacity:.45;cursor:not-allowed}
  .qsummary{
    background:var(--bg);border:1px solid var(--border);border-radius:16px;padding:14px;margin-top:14px;
    color:var(--navy);
  }
  .qsmall{color:var(--muted);font-size:13px;margin-top:10px}
</style>

<section id="quote" class="qwrap">
  <div class="qcard">
    <div class="qhead">
      <h2>Get a Quote</h2>
      <p>Answer a few quick questions. We’ll email your request to Tidy Builders.</p>
      <div class="qsteps" aria-hidden="true">
        <div class="qdot on" id="dot1"></div>
        <div class="qdot" id="dot2"></div>
        <div class="qdot" id="dot3"></div>
      </div>
    </div>

    <div class="qbody">
      <!-- STEP 1 -->
      <div class="qstep" id="step1">
        <strong>Step 1: What do you need help with?</strong>

        <div class="qgrid">
          <div class="qopt" data-service="Electrical">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M13 2L3 14h7l-1 8 12-14h-7l-1-6z"/>
              </svg>
            </div>
            <div>
              <h3>Electrical</h3>
              <p>Light installs, troubleshooting</p>
            </div>
          </div>

          <div class="qopt" data-service="Plumbing">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M8 2v6a4 4 0 0 0 4 4h4v10"/>
                <path d="M16 22h6"/>
              </svg>
            </div>
            <div>
              <h3>Plumbing</h3>
              <p>Fixtures, leaks, repairs</p>
            </div>
          </div>

          <div class="qopt" data-service="Painting">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M4 14l7-7 6 6-7 7H4v-6z"/>
                <path d="M14 6l4-4 2 2-4 4"/>
              </svg>
            </div>
            <div>
              <h3>Painting</h3>
              <p>Interior/exterior</p>
            </div>
          </div>

          <div class="qopt" data-service="Mounting & Installations">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M4 6h16v10H4z"/>
                <path d="M8 20h8"/>
              </svg>
            </div>
            <div>
              <h3>Mounting</h3>
              <p>TVs, shelves, fixtures</p>
            </div>
          </div>

          <div class="qopt" data-service="Carpentry">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M2 22l7-7"/>
                <path d="M14 3l7 7-4 4-7-7z"/>
                <path d="M10 7l7 7"/>
              </svg>
            </div>
            <div>
              <h3>Carpentry</h3>
              <p>Doors, trim, repairs</p>
            </div>
          </div>

          <div class="qopt" data-service="EV Charger Installation">
            <div class="qicon">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                <path d="M7 2h8v8H7z"/>
                <path d="M10 6h2"/>
                <path d="M15 6h2"/>
                <path d="M17 10v10a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V10"/>
                <path d="M21 7v4"/>
              </svg>
            </div>
            <div>
              <h3>EV Charger</h3>
              <p>Residential install</p>
            </div>
          </div>
        </div>

        <div class="qactions">
          <button class="qbtn" disabled>Back</button>
          <button class="qbtn primary" id="next1" disabled>Next</button>
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="qstep" id="step2" style="display:none">
        <strong>Step 2: Where and what’s the issue?</strong>

        <div class="qrow">
          <div class="qfield">
            <label for="q_address">Address or neighborhood (LA)</label>
            <input id="q_address" type="text" placeholder="Example: Sherman Oaks / 90025" />
          </div>
          <div class="qfield">
            <label for="q_time">Preferred timing</label>
            <input id="q_time" type="text" placeholder="Example: This week, afternoons" />
          </div>
        </div>

        <div class="qrow">
          <div class="qfield">
            <label for="q_details">Describe the problem</label>
            <textarea id="q_details" placeholder="What’s happening? What do you want installed/fixed? Any special notes?"></textarea>
          </div>
          <div class="qfield">
            <label for="q_photos">Photo links (optional)</label>
            <textarea id="q_photos" placeholder="Paste links (Google Photos/Drive/etc). Or say: 'Will text photos'"></textarea>
          </div>
        </div>

        <div class="qactions">
          <button class="qbtn" id="back2">Back</button>
          <button class="qbtn primary" id="next2">Next</button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div class="qstep" id="step3" style="display:none">
        <strong>Step 3: Your contact info</strong>

        <div class="qrow">
          <div class="qfield">
            <label for="q_name">Your name</label>
            <input id="q_name" type="text" placeholder="Full name" />
          </div>
          <div class="qfield">
            <label for="q_phone">Your phone (so we can text/call)</label>
            <input id="q_phone" type="tel" placeholder="(###) ###-####" />
          </div>
        </div>

        <div class="qrow">
          <div class="qfield">
            <label for="q_email">Your email (optional)</label>
            <input id="q_email" type="email" placeholder="name@email.com" />
          </div>
          <div class="qfield">
            <label for="q_service_show">Service</label>
            <input id="q_service_show" type="text" disabled />
          </div>
        </div>

        <div class="qsummary" id="q_summary"></div>

        <div class="qactions">
          <button class="qbtn" id="back3">Back</button>
          <a class="qbtn primary" id="sendEmail" href="#">Email request to Tidy Builders</a>
        </div>

        <div class="qsmall">
          This uses your email app to send the request (no backend needed).
        </div>
      </div>

    </div>
  </div>
</section>

<script>
  // Quote flow state
  let qService = "";

  const step1 = document.getElementById("step1");
  const step2 = document.getElementById("step2");
  const step3 = document.getElementById("step3");

  const dot1 = document.getElementById("dot1");
  const dot2 = document.getElementById("dot2");
  const dot3 = document.getElementById("dot3");

  const next1 = document.getElementById("next1");
  const next2 = document.getElementById("next2");

  const back2 = document.getElementById("back2");
  const back3 = document.getElementById("back3");

  const qAddress = document.getElementById("q_address");
  const qTime = document.getElementById("q_time");
  const qDetails = document.getElementById("q_details");
  const qPhotos = document.getElementById("q_photos");

  const qName = document.getElementById("q_name");
  const qPhone = document.getElementById("q_phone");
  const qEmail = document.getElementById("q_email");

  const qServiceShow = document.getElementById("q_service_show");
  const qSummary = document.getElementById("q_summary");
  const sendEmail = document.getElementById("sendEmail");

  function showStep(n){
    step1.style.display = (n===1) ? "block" : "none";
    step2.style.display = (n===2) ? "block" : "none";
    step3.style.display = (n===3) ? "block" : "none";

    dot1.className = "qdot" + (n===1 ? " on" : "");
    dot2.className = "qdot" + (n===2 ? " on" : "");
    dot3.className = "qdot" + (n===3 ? " on" : "");
  }

  // Step 1 selection
  document.querySelectorAll(".qopt").forEach(el => {
    el.addEventListener("click", () => {
      qService = el.getAttribute("data-service");
      next1.disabled = false;

      // light selection indicator
      document.querySelectorAll(".qopt").forEach(x => x.style.outline = "none");
      el.style.outline = "2px solid #2563eb";
      el.style.outlineOffset = "2px";
    });
  });

  next1.addEventListener("click", () => {
    showStep(2);
  });

  back2.addEventListener("click", () => {
    showStep(1);
  });

  next2.addEventListener("click", () => {
    qServiceShow.value = qService || "";
    const summary =
      "Service: " + (qService || "-") + "\n" +
      "Area/Address: " + (qAddress.value || "-") + "\n" +
      "Preferred timing: " + (qTime.value || "-") + "\n" +
      "Details: " + (qDetails.value || "-") + "\n" +
      "Photo links: " + (qPhotos.value || "-");

    qSummary.textContent = summary;

    const subject = encodeURIComponent("Quote request — " + (qService || "Tidy Builders"));
    const body = encodeURIComponent(
      summary + "\n\n" +
      "Customer name: " + (qName.value || "-") + "\n" +
      "Customer phone: " + (qPhone.value || "-") + "\n" +
      "Customer email: " + (qEmail.value || "-")
    );

    // We'll update again on Step 3 input, but set initial
    sendEmail.href = "mailto:tidybuildersco@gmail.com?subject=" + subject + "&body=" + body;

    showStep(3);
  });

  back3.addEventListener("click", () => {
    showStep(2);
  });

  // Update email link live as user types in step 3
  ["input","change"].forEach(evt => {
    [qName,qPhone,qEmail,qAddress,qTime,qDetails,qPhotos].forEach(el => {
      el.addEventListener(evt, () => {
        const summary =
          "Service: " + (qService || "-") + "\n" +
          "Area/Address: " + (qAddress.value || "-") + "\n" +
          "Preferred timing: " + (qTime.value || "-") + "\n" +
          "Details: " + (qDetails.value || "-") + "\n" +
          "Photo links: " + (qPhotos.value || "-") + "\n\n" +
          "Customer name: " + (qName.value || "-") + "\n" +
          "Customer phone: " + (qPhone.value || "-") + "\n" +
          "Customer email: " + (qEmail.value || "-");

        qSummary.textContent = summary;

        const subject = encodeURIComponent("Quote request — " + (qService || "Tidy Builders"));
        const body = encodeURIComponent(summary);
        sendEmail.href = "mailto:tidybuildersco@gmail.com?subject=" + subject + "&body=" + body;
      });
    });
  });

  // Start on step 1
  showStep(1);
</script>
